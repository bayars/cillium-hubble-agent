# Datacenter 2 - Traffic Generator Topology
# Dual spine with iperf3 traffic generators

name: dc2

topology:
  kinds:
    srl:
      image: ghcr.io/nokia/srlinux:24.3.2
      type: ixrd2l

  nodes:
    spine1:
      kind: srl

    spine2:
      kind: srl

    leaf1:
      kind: linux
      image: quay.io/frrouting/frr:9.1.0

    tgen1:
      kind: linux
      image: networkstatic/iperf3:latest

    tgen2:
      kind: linux
      image: networkstatic/iperf3:latest

    tgen3:
      kind: linux
      image: networkstatic/iperf3:latest

  links:
    - endpoints: ["spine1:e1-1", "leaf1:eth1"]
    - endpoints: ["spine2:e1-1", "leaf1:eth2"]
    - endpoints: ["spine1:e1-2", "spine2:e1-2"]
    - endpoints: ["leaf1:eth3", "tgen1:eth1"]
    - endpoints: ["leaf1:eth4", "tgen2:eth1"]
    - endpoints: ["leaf1:eth5", "tgen3:eth1"]
